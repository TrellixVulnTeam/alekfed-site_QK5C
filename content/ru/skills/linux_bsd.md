+++
title = "Системное администрирование"
subtitle = "Общий опыт: 4 года"
tags = ['System']
date = 2020-03-26

# For description meta tag
description = "Операционные системы и системное программирование."

# Comment next line and the default banner wil be used.
banner = 'img/linux_bsd.svg'

+++

Необходимость понимания в операционных систем и умения писать shell-скрипты появляется естественным образом при работе с back-end и DevOps.

# Linux

Долгое время моей повседневной системой была Arch Linux, а типовым выбором для серверов — Debian. В последнее время меня заинтересовали идеи stateless операционных систем на базе функциональных декларативных конфигураций, что привело меня к [NixOS](https://nixos.org/) ([мой конфиг](https://git.sr.ht/~alekfed/nix-config)) и [Guix](https://guix.gnu.org/).

NixOS вполне может избавить от необходимости возиться с Ansible при обновлении серверов и гарантировать их работоспособность при любом обновлении, но отсутствие загрузочных образов на базе NixOS у облачных провайдеров пока ограничивает применимость этих идей. Что же касается Guix, то, при всей привлекательности Scheme, её время ещё не пришло (и может не прийти): даже если систему удасться запустить на реальном железе (есть сложности), перекомпилировать ядро при каждом обновлении из-за использования несвободных драйверов — спасибо, нам хватило Gentoo...

Говоря о Linux, нельзя обойти тему контейнеризации: помимо написания и оптимизации Dockerfile'ов, есть опыт разворачивания систем с Docker внутри [LXC](https://linuxcontainers.org/)-контейнеров с ограниченными правами. (каких только чудес не бывает...)

Что касаемо [systemd](https://systemd.io/): есть небольшой опыт написания юнитов, аллергии нет.

# FreeBSD, OpenBSD

Некоторое время назад меня интересовал мир BSD.

[FreeBSD](https://www.freebsd.org/): вполне жизнеспособный вариант для любой задачи (даже [Wayland](https://wayland.freedesktop.org/) уже по-тихоньку приживается), да и интересно наблюдать за развитием FreeBSD'шного ответа Docker Hub'у в виде [Bastille](https://bastillebsd.org/). Тем не менее, целесообразность использования FreeBSD в production в настоящий момент весьма туманна.

[OpenBSD](https://www.openbsd.org/): эталонный пример документированности и продуманности системы (без шуток). Увы, из-за вечных проблем с реальным железом и экспериментального статуса виртуализации на уровне ядра ([vmm](http://man.openbsd.org/vmm.4) — Тео всё-таки сдался) перспективы применимости этой системы ещё более туманны, чем у FreeBSD.

Тем не менее, из этого опыта я вынес любовь и уважение к [ZFS](https://en.wikipedia.org/wiki/ZFS), которая вполне надёжно портирована и на Linux ([OpenZFS](https://openzfs.org/wiki/Main_Page)). Лучше, чем нативная [Btrfs](https://btrfs.wiki.kernel.org/index.php/Main_Page), уж точно.

# Shell-скрипты, POSIX

Несмотря на то, что Python сейчас можно найти практически на любой машине (особенно, когда Python — основной язык сервисов компании, в которой ты работаешь), иногда гораздо проще и быстрее использовать отдельные программы, склеенные shell-скриптами. В основном, я пишу скрипты с использованием башизмов, но, в зависимости от задачи (Debian-based система на сервере, busybox-based образ контейнера...), могу писать и в `POSIX sh`-совместимом виде.

# RTOS

В области встраеваемых систем, есть опыт разработки операционной системы реального времени, разрабатывавшейся на C++, а также опыт работы с FreeRTOS. RTOS на C++ создавалась в расчёте на использование в контурах управления БПЛА, FreeRTOS использовалась в контурах управления силовыми преобразователями. См. также раздел по [C++](/ru/skills/cpp/).

___
# Иллюстрация

- Композиция в целом: обложки книг O'Reilly до ребрендинга. Эта иллюстрация вдохновлена в первую очередь книгами Арнольда Роббинса по [sed и awk](https://www.amazon.com/sed-awk-Dale-Dougherty/dp/1565922255/), двум завсегдатаям многих shell-скриптов, и [отдельно awk](https://www.amazon.com/Effective-awk-Programming-Universal-Processing/dp/1491904615/), который мог бы быть неплохим скриптовым языком, если бы не принудительная (в отличие от Lua) глобальная видимость для всего.

- Зелёное соцветие: библия системного программирования на Linux от [Майкла Керриска](https://www.amazon.com/Linux-Programming-Interface-System-Handbook/dp/1593272200/). Не могу сказать, что знаю эту книгу от корки до корки, но регулярно обращаюсь к ней, когда меня интересует что-то во внутренностях Linux. Подзаголовок **POSIX** также выполнен в цветах обложки этой книги.

- Сине-голубые лямбды и красная сфера с рогами: логотипы [NixOS](https://nixos.org/) и [FreeBSD](https://www.freebsd.org/) соответственно.
